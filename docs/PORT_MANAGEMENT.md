# SAFE系统端口管理文档

## 端口分配策略

为了避免端口冲突，采用以下端口分配方案：

### 🚀 核心服务端口

| 端口 | 服务 | 状态 | 描述 | 用户故事 |
|------|------|------|------|----------|
| 8000 | Story 1.3 验证服务 | ✅ 已占用 | 基础API框架验证页面 | Story 1.3 |
| 8001 | Story 2.2 S-Agent (旧版) | ❌ 已占用 | AI战略分析演示系统 - 硬编码版本 | Story 2.2 |
| 8002 | Story 2.2 S-Agent (LLM版) | ✅ 已占用 | AI战略分析演示系统 - 真正LLM推理 | Story 2.2 |
| 8003 | Story 2.3 A-Agent 演示 | 📋 计划 | AI分析家演示系统 | Story 2.3 |
| 8004 | Story 2.4 F-Agent 演示 | 📋 计划 | 现场执行演示系统 | Story 2.4 |
| 8005 | 统一管理控制台 | 📋 计划 | 所有Agent统一管理界面 | 管理工具 |
| 8006 | AutoGen 协作演示 | 📋 计划 | 多Agent协作演示 | AutoGen验证 |
| 8007 | 性能监控面板 | 📋 计划 | 系统性能监控 | 监控工具 |
| 8008 | API文档服务 | 📋 计划 | 自动API文档生成 | 开发工具 |
| 8009-8099 | 备用端口 | 📋 预留 | 未来扩展使用 | 预留 |

### 📋 端口使用规则

1. **严格分配** - 每个用户故事使用独立端口
2. **文档记录** - 所有端口使用必须在此文档中记录
3. **冲突检查** - 新服务启动前必须检查端口占用
4. **统一管理** - 建立统一的管理控制台汇总所有服务

### 🔍 端口检查命令

```bash
# 检查端口占用
lsof -i :8001
netstat -an | grep 8001
curl -I http://localhost:8001

# 查看所有相关端口
lsof -i :8000-8010
```

### 📝 新服务端口申请流程

1. 在此文档中申请端口
2. 检查端口是否可用
3. 更新服务配置
4. 测试服务正常运行
5. 更新文档状态

### 🚨 端口冲突处理

如果发现端口冲突：
1. 立即停止冲突服务
2. 重新分配可用端口
3. 更新相关配置
4. 通知相关人员

---

**最后更新**: 2025-10-22
**维护者**: 开发团队
**版本**: v1.0