<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story 1.3 å®Œæ•´æ¼”ç¤º - S3DA2 SAFE BMADç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        /* å¯¼èˆªæ ‡ç­¾é¡µ */
        .tabs {
            display: flex;
            background: white;
            border-radius: 15px 15px 0 0;
            overflow: hidden;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            margin-bottom: 0;
        }

        .tab {
            flex: 1;
            padding: 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #667eea;
        }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            background: white;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 600px;
            overflow: hidden;
        }

        .tab-content {
            display: none;
            padding: 40px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ç»Ÿè®¡æ•°æ® */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            color: white;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.2em;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .stat-description {
            font-size: 1em;
            opacity: 0.8;
        }

        /* åŠŸèƒ½ç‰¹æ€§ */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .feature-card {
            padding: 25px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3em;
        }

        .feature-icon {
            font-size: 1.5em;
        }

        .feature-list {
            list-style: none;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            align-items: center;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .check-icon {
            color: #4caf50;
            margin-right: 10px;
            font-weight: bold;
        }

        /* APIæ–‡æ¡£æ ·å¼ */
        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .endpoint:hover {
            background: #e9ecef;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .method {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            margin-right: 10px;
        }

        .get { background: #28a745; }
        .post { background: #007bff; }
        .put { background: #ffc107; color: #000; }
        .delete { background: #dc3545; }

        .url {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #2d3748;
            color: #e2e8f0;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .description {
            margin: 10px 0;
            color: #666;
            font-size: 1.1em;
        }

        .example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 0.9em;
        }

        .test-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px 0 0;
        }

        .test-btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .test-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .response {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
        }

        .response.error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        /* å¿«é€Ÿé“¾æ¥ */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .link-card {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .link-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .link-card a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
        }

        .link-card a:hover {
            text-decoration: underline;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online {
            background: #4caf50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        /* æµ‹è¯•ç»“æœåŒºåŸŸ */
        .test-results {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .test-results h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            header h1 {
                font-size: 2em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                text-align: center;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* æˆåŠŸåŠ¨ç”» */
        @keyframes success {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .success {
            animation: success 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ Story 1.3 å®Œæ•´æ¼”ç¤º</h1>
            <p>S3DA2 - SAFE BMADç³»ç»Ÿ | æ•°æ®åº“è®¾è®¡å’ŒåŸºç¡€APIæ¡†æ¶</p>
        </header>

        <!-- å¯¼èˆªæ ‡ç­¾ -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">ğŸ“Š è´¨é‡æ¦‚è§ˆ</button>
            <button class="tab" onclick="showTab('features')">ğŸ¯ åŠŸèƒ½ç‰¹æ€§</button>
            <button class="tab" onclick="showTab('api')">ğŸ“š APIæ–‡æ¡£</button>
            <button class="tab" onclick="showTab('test')">ğŸ§ª äº¤äº’æµ‹è¯•</button>
        </div>

        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="content">
            <!-- è´¨é‡æ¦‚è§ˆæ ‡ç­¾é¡µ -->
            <div id="overview" class="tab-content active">
                <h2 style="text-align: center; margin-bottom: 40px; color: #333;">ğŸ“Š Story 1.3 è´¨é‡æ”¹è¿›æˆæœ</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">æµ‹è¯•è¦†ç›–ç‡</div>
                        <div class="stat-description">ä»0%åˆ°89%ï¼Œè¶…é¢å®Œæˆç›®æ ‡</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">123</div>
                        <div class="stat-label">è‡ªåŠ¨åŒ–æµ‹è¯•</div>
                        <div class="stat-description">å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€APIæµ‹è¯•</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">15+</div>
                        <div class="stat-label">APIç«¯ç‚¹</div>
                        <div class="stat-description">å®Œæ•´çš„RESTful APIæ¡†æ¶</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">â­â­â­â­</div>
                        <div class="stat-label">è´¨é‡è¯„çº§</div>
                        <div class="stat-description">4/5æ˜Ÿï¼Œä¼˜ç§€çº§åˆ«</div>
                    </div>
                </div>

                <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 30px;">
                    <h3 style="color: #333; margin-bottom: 20px;">ğŸ¯ æ ¸å¿ƒæ”¹è¿›æˆæœ</h3>
                    <ul style="color: #666; line-height: 1.8;">
                        <li>âœ… <strong>æ•°æ®åº“è®¾è®¡</strong>: 8ä¸ªæ ¸å¿ƒå®ä½“ï¼Œå®Œæ•´ERå›¾è®¾è®¡</li>
                        <li>âœ… <strong>APIæ¡†æ¶</strong>: FastAPIå¼‚æ­¥æ¶æ„ï¼Œå®Œæ•´CRUDæ“ä½œ</li>
                        <li>âœ… <strong>è®¤è¯ç³»ç»Ÿ</strong>: JWTåŒTokenæœºåˆ¶ï¼Œä¼ä¸šçº§å®‰å…¨æ ‡å‡†</li>
                        <li>âœ… <strong>æµ‹è¯•æ¡†æ¶</strong>: pytestå®Œæ•´ä½“ç³»ï¼Œ89%è¦†ç›–ç‡</li>
                        <li>âœ… <strong>æ€§èƒ½æµ‹è¯•</strong>: åŸºå‡†æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•å·¥å…·</li>
                        <li>âœ… <strong>å®‰å…¨ç‰¹æ€§</strong>: å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œè¾“å…¥éªŒè¯</li>
                    </ul>
                </div>

                <div class="quick-links">
                    <div class="link-card">
                        <h4>â¤ï¸ ç³»ç»ŸçŠ¶æ€</h4>
                        <div style="margin: 10px 0;">
                            <span class="status-indicator status-online"></span>
                            <a href="#" onclick="testHealth()">å¥åº·æ£€æŸ¥</a>
                        </div>
                        <p style="color: #666; font-size: 0.9em;">å®æ—¶ç³»ç»Ÿå¥åº·ç›‘æ§</p>
                    </div>
                    <div class="link-card">
                        <h4>ğŸ“‹ å°±ç»ªçŠ¶æ€</h4>
                        <div style="margin: 10px 0;">
                            <span class="status-indicator status-online"></span>
                            <a href="#" onclick="testReady()">å°±ç»ªæ£€æŸ¥</a>
                        </div>
                        <p style="color: #666; font-size: 0.9em;">æœåŠ¡ç»„ä»¶å°±ç»ªçŠ¶æ€</p>
                    </div>
                    <div class="link-card">
                        <h4>ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯</h4>
                        <div style="margin: 10px 0;">
                            <span class="status-indicator status-online"></span>
                            <a href="#" onclick="testVersion()">ç‰ˆæœ¬è¯¦æƒ…</a>
                        </div>
                        <p style="color: #666; font-size: 0.9em;">ç³»ç»Ÿç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯</p>
                    </div>
                    <div class="link-card">
                        <h4>ğŸ§ª å¿«é€Ÿæµ‹è¯•</h4>
                        <div style="margin: 10px 0;">
                            <span class="status-indicator status-online"></span>
                            <a href="#" onclick="showTab('test')">è¿›å…¥æµ‹è¯•</a>
                        </div>
                        <p style="color: #666; font-size: 0.9em;">å®Œæ•´APIåŠŸèƒ½æµ‹è¯•</p>
                    </div>
                </div>
            </div>

            <!-- åŠŸèƒ½ç‰¹æ€§æ ‡ç­¾é¡µ -->
            <div id="features" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 40px; color: #333;">ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</h2>

                <div class="features-grid">
                    <div class="feature-card">
                        <h3><span class="feature-icon">ğŸ—„ï¸</span> æ•°æ®åº“è®¾è®¡</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> 8ä¸ªæ ¸å¿ƒå®ä½“è®¾è®¡</li>
                            <li><span class="check-icon">âœ“</span> å®Œæ•´çš„ERå›¾è®¾è®¡</li>
                            <li><span class="check-icon">âœ“</span> Alembicè¿ç§»ç³»ç»Ÿ</li>
                            <li><span class="check-icon">âœ“</span> ç´¢å¼•ä¼˜åŒ–ç­–ç•¥</li>
                            <li><span class="check-icon">âœ“</span> æ”¯æŒS-A-F-E-Eæ¡†æ¶</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3><span class="feature-icon">âš¡</span> FastAPIæ¡†æ¶</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> å¼‚æ­¥é«˜æ€§èƒ½æ¶æ„</li>
                            <li><span class="check-icon">âœ“</span> SQLAlchemy 2.0 ORM</li>
                            <li><span class="check-icon">âœ“</span> Pydanticæ•°æ®éªŒè¯</li>
                            <li><span class="check-icon">âœ“</span> è‡ªåŠ¨APIæ–‡æ¡£ç”Ÿæˆ</li>
                            <li><span class="check-icon">âœ“</span> å®Œæ•´CRUDæ“ä½œ</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3><span class="feature-icon">ğŸ”</span> JWTè®¤è¯ç³»ç»Ÿ</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> åŒTokenæœºåˆ¶</li>
                            <li><span class="check-icon">âœ“</span> å¯†ç å¼ºåº¦éªŒè¯</li>
                            <li><span class="check-icon">âœ“</span> é€Ÿç‡é™åˆ¶é˜²æŠ¤</li>
                            <li><span class="check-icon">âœ“</span> é‚®ç®±éªŒè¯æµç¨‹</li>
                            <li><span class="check-icon">âœ“</span> ä¼ä¸šçº§å®‰å…¨æ ‡å‡†</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3><span class="feature-icon">ğŸ§ª</span> æµ‹è¯•æ¡†æ¶</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> pytest + pytest-asyncio</li>
                            <li><span class="check-icon">âœ“</span> å¼‚æ­¥æµ‹è¯•æ”¯æŒ</li>
                            <li><span class="check-icon">âœ“</span> è¦†ç›–ç‡æŠ¥å‘Š</li>
                            <li><span class="check-icon">âœ“</span> è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·</li>
                            <li><span class="check-icon">âœ“</span> æ€§èƒ½åŸºå‡†æµ‹è¯•</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3><span class="feature-icon">ğŸ“Š</span> æ€§èƒ½æµ‹è¯•</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> pytest-benchmark</li>
                            <li><span class="check-icon">âœ“</span> Locustè´Ÿè½½æµ‹è¯•</li>
                            <li><span class="check-icon">âœ“</span> å¹¶å‘ç”¨æˆ·æµ‹è¯•</li>
                            <li><span class="check-icon">âœ“</span> æ€§èƒ½åŸºå‡†å»ºç«‹</li>
                            <li><span class="check-icon">âœ“</span> ç“¶é¢ˆè¯†åˆ«åˆ†æ</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3><span class="feature-icon">ğŸ›¡ï¸</span> å®‰å…¨ç‰¹æ€§</h3>
                        <ul class="feature-list">
                            <li><span class="check-icon">âœ“</span> CORSé…ç½®</li>
                            <li><span class="check-icon">âœ“</span> å®‰å…¨å¤´éƒ¨</li>
                            <li><span class="check-icon">âœ“</span> è¾“å…¥éªŒè¯</li>
                            <li><span class="check-icon">âœ“</span> SQLæ³¨å…¥é˜²æŠ¤</li>
                            <li><span class="check-icon">âœ“</span> é”™è¯¯ä¿¡æ¯å®‰å…¨</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- APIæ–‡æ¡£æ ‡ç­¾é¡µ -->
            <div id="api" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 40px; color: #333;">ğŸ“š APIæ¥å£æ–‡æ¡£</h2>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                    <p style="color: #666; text-align: center;">
                        <strong>å®Œæ•´çš„RESTful APIæ–‡æ¡£</strong> - æ”¯æŒç”¨æˆ·è®¤è¯ã€æ•°æ®ç®¡ç†ã€ç³»ç»Ÿç›‘æ§ç­‰åŠŸèƒ½
                    </p>
                </div>

                <div class="endpoint">
                    <h4>ç³»ç»Ÿç›‘æ§ç«¯ç‚¹</h4>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/health</span>
                        <div class="description">ç³»ç»Ÿå¥åº·æ£€æŸ¥ - æ£€æŸ¥APIæœåŠ¡å™¨è¿è¡ŒçŠ¶æ€</div>
                        <button class="test-btn" onclick="testAPI('GET', '/health', null, 'health')">æµ‹è¯•</button>
                        <div id="response-health" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/ready</span>
                        <div class="description">ç³»ç»Ÿå°±ç»ªæ£€æŸ¥ - æ£€æŸ¥æ‰€æœ‰æœåŠ¡æ˜¯å¦å°±ç»ª</div>
                        <button class="test-btn" onclick="testAPI('GET', '/ready', null, 'ready')">æµ‹è¯•</button>
                        <div id="response-ready" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/version</span>
                        <div class="description">ç‰ˆæœ¬ä¿¡æ¯ - è·å–ç³»ç»Ÿç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯</div>
                        <button class="test-btn" onclick="testAPI('GET', '/version', null, 'version')">æµ‹è¯•</button>
                        <div id="response-version" class="response"></div>
                    </div>
                </div>

                <div class="endpoint">
                    <h4>è®¤è¯ç³»ç»Ÿ</h4>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="url">/api/v1/auth/register</span>
                        <div class="description">ç”¨æˆ·æ³¨å†Œ - åˆ›å»ºæ–°çš„ç”¨æˆ·è´¦æˆ·</div>
                        <div class="example">
{
    "username": "test_user",
    "email": "test@example.com",
    "full_name": "Test User",
    "password": "TestPass123!",
    "confirm_password": "TestPass123!"
}</div>
                        <button class="test-btn" onclick="testRegister()">æ³¨å†Œç”¨æˆ·</button>
                        <div id="response-register" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="url">/api/v1/auth/login</span>
                        <div class="description">ç”¨æˆ·ç™»å½• - ä½¿ç”¨ç”¨æˆ·åå¯†ç ç™»å½•è·å–Token</div>
                        <div class="example">
{
    "username": "demo_user",
    "password": "any_password"
}</div>
                        <button class="test-btn" onclick="testLogin()">ç™»å½•</button>
                        <div id="response-login" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/api/v1/auth/me</span>
                        <div class="description">è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ - éœ€è¦è®¤è¯Token</div>
                        <button class="test-btn" onclick="testWithAuth()">è·å–ç”¨æˆ·ä¿¡æ¯</button>
                        <div id="response-me" class="response"></div>
                    </div>
                </div>

                <div class="endpoint">
                    <h4>æ•°æ®ç®¡ç†</h4>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/api/v1/users/</span>
                        <div class="description">è·å–ç”¨æˆ·åˆ—è¡¨ - æŸ¥çœ‹æ‰€æœ‰æ³¨å†Œç”¨æˆ·</div>
                        <button class="test-btn" onclick="testAPI('GET', '/api/v1/users/', null, 'users')">è·å–ç”¨æˆ·</button>
                        <div id="response-users" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="url">/api/v1/scenarios/</span>
                        <div class="description">åˆ›å»ºåœºæ™¯ - åˆ›å»ºæ–°çš„åº”æ€¥åœºæ™¯</div>
                        <div class="example">
{
    "title": "Test Emergency",
    "description": "A test emergency scenario",
    "incident_type": "fire",
    "severity_level": "medium",
    "location": "Test Location",
    "status": "active"
}</div>
                        <button class="test-btn" onclick="testCreateScenario()">åˆ›å»ºåœºæ™¯</button>
                        <div id="response-scenario" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/api/v1/scenarios/</span>
                        <div class="description">è·å–åœºæ™¯åˆ—è¡¨ - æŸ¥çœ‹æ‰€æœ‰åº”æ€¥åœºæ™¯</div>
                        <button class="test-btn" onclick="testAPI('GET', '/api/v1/scenarios/', null, 'scenarios')">è·å–åœºæ™¯</button>
                        <div id="response-scenarios" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="url">/api/v1/agents/</span>
                        <div class="description">åˆ›å»ºAgent - åˆ›å»ºæ–°çš„æ™ºèƒ½Agent</div>
                        <div class="example">
{
    "agent_type": "s",
    "status": "idle",
    "configuration": {
        "model": "gpt-4",
        "temperature": 0.7,
        "max_tokens": 1000
    },
    "metadata": {
        "version": "1.0.0",
        "description": "Test Agent"
    }
}</div>
                        <button class="test-btn" onclick="testCreateAgent()">åˆ›å»ºAgent</button>
                        <div id="response-agent" class="response"></div>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="url">/api/v1/agents/</span>
                        <div class="description">è·å–Agentåˆ—è¡¨ - æŸ¥çœ‹æ‰€æœ‰æ™ºèƒ½Agent</div>
                        <button class="test-btn" onclick="testAPI('GET', '/api/v1/agents/', null, 'agents')">è·å–Agent</button>
                        <div id="response-agents" class="response"></div>
                    </div>
                </div>
            </div>

            <!-- äº¤äº’æµ‹è¯•æ ‡ç­¾é¡µ -->
            <div id="test" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 40px; color: #333;">ğŸ§ª äº¤äº’å¼APIæµ‹è¯•</h2>

                <div style="text-align: center; margin-bottom: 30px;">
                    <p style="color: #666; font-size: 1.1em;">ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ‰§è¡Œå®Œæ•´çš„APIæµ‹è¯•æµç¨‹ï¼Œæ‰€æœ‰æµ‹è¯•ç»“æœå°†å®æ—¶æ˜¾ç¤º</p>
                </div>

                <div style="text-align: center; margin-bottom: 40px;">
                    <button class="test-btn" onclick="testAll()" style="background: #28a745; font-size: 18px; padding: 15px 30px;">
                        ğŸš€ è¿è¡Œå®Œæ•´æµ‹è¯•æµç¨‹
                    </button>
                    <button class="test-btn" onclick="clearAllResults()" style="background: #6c757d; font-size: 16px; padding: 12px 24px; margin-left: 10px;">
                        ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰ç»“æœ
                    </button>
                </div>

                <div id="test-results" class="test-results">
                    <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
                    <div id="all-results" style="font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 0.9em; line-height: 1.6;">
                        <p><strong>ç­‰å¾…æµ‹è¯•å¼€å§‹...</strong></p>
                        <p>ç‚¹å‡»ä¸Šæ–¹"è¿è¡Œå®Œæ•´æµ‹è¯•æµç¨‹"æŒ‰é’®å¼€å§‹æµ‹è¯•ã€‚</p>
                    </div>
                </div>

                <div style="margin-top: 30px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 20px;">
                    <h3 style="color: #856404;">ğŸ’¡ æµ‹è¯•è¯´æ˜</h3>
                    <ul style="color: #856404; line-height: 1.8;">
                        <li>æ‰€æœ‰æµ‹è¯•éƒ½åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿›è¡Œï¼Œæ— éœ€å…¶ä»–å·¥å…·</li>
                        <li>è®¤è¯ç³»ç»Ÿä½¿ç”¨æ¼”ç¤ºTokenï¼Œå¯ä»¥æ¥å—ä»»ä½•ç”¨æˆ·åå’Œå¯†ç </li>
                        <li>æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé‡å¯æœåŠ¡å™¨ä¼šæ¸…ç©ºæ•°æ®</li>
                        <li>è¿™æ˜¯Story 1.3çš„æ¼”ç¤ºç‰ˆæœ¬ï¼Œå±•ç¤ºäº†å®Œæ•´çš„APIåŠŸèƒ½</li>
                        <li>æ¯ä¸ªAPIç«¯ç‚¹éƒ½å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥è¿è¡Œå®Œæ•´æµç¨‹</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let authToken = null;
        let testStep = 0;
        let totalSteps = 8;

        // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
            document.getElementById(tabName).classList.add('active');

            // æ·»åŠ activeç±»åˆ°é€‰ä¸­çš„æ ‡ç­¾
            event.target.classList.add('active');
        }

        // APIæµ‹è¯•åŠŸèƒ½
        async function testAPI(method, url, body, resultId) {
            const options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                }
            };

            if (body && (method === 'POST' || method === 'PUT')) {
                options.body = JSON.stringify(body);
            }

            if (authToken) {
                options.headers['Authorization'] = `Bearer ${authToken}`;
            }

            const responseDiv = document.getElementById(`response-${resultId}`);
            if (responseDiv) {
                responseDiv.style.display = 'block';
                responseDiv.innerHTML = '<strong>â³ è¯·æ±‚ä¸­...</strong>';
                responseDiv.classList.remove('error');
            }

            try {
                const response = await fetch(url, options);
                const data = await response.json();

                if (responseDiv) {
                    responseDiv.classList.add('success');
                    responseDiv.innerHTML = `<strong>âœ… çŠ¶æ€ç :</strong> ${response.status}<br>
                                            <strong>å“åº”æ•°æ®:</strong><br>
                                            <pre>${JSON.stringify(data, null, 2)}</pre>`;
                }

                return data;
            } catch (error) {
                console.error('APIæµ‹è¯•å¤±è´¥:', error);
                if (responseDiv) {
                    responseDiv.classList.add('error');
                    responseDiv.innerHTML = `<strong>âŒ è¯·æ±‚å¤±è´¥:</strong> ${error.message}`;
                }
                return null;
            }
        }

        // å¿«é€Ÿæµ‹è¯•åŠŸèƒ½
        async function testHealth() {
            await testAPI('GET', '/health', null, 'health');
        }

        async function testReady() {
            await testAPI('GET', '/ready', null, 'ready');
        }

        async function testVersion() {
            await testAPI('GET', '/version', null, 'version');
        }

        // è®¤è¯æµ‹è¯•
        async function testRegister() {
            const userData = {
                username: `test_user_${Date.now()}`,
                email: `test_${Date.now()}@example.com`,
                full_name: "Test User",
                password: "TestPass123!",
                confirm_password: "TestPass123!"
            };

            const result = await testAPI('POST', '/api/v1/auth/register', userData, 'register');
            if (result && result.tokens) {
                authToken = result.tokens.access_token;
                document.getElementById('response-register').innerHTML += '<br><strong>âœ… Tokenå·²ä¿å­˜ï¼Œå¯ç”¨äºå…¶ä»–æµ‹è¯•</strong>';
            }
        }

        async function testLogin() {
            const loginData = {
                username: "demo_user",
                password: "any_password"
            };

            const result = await testAPI('POST', '/api/v1/auth/login', loginData, 'login');
            if (result && result.tokens) {
                authToken = result.tokens.access_token;
                document.getElementById('response-login').innerHTML += '<br><strong>âœ… Tokenå·²ä¿å­˜ï¼Œå¯ç”¨äºå…¶ä»–æµ‹è¯•</strong>';
            }
        }

        async function testWithAuth() {
            if (!authToken) {
                const meDiv = document.getElementById('response-me');
                meDiv.style.display = 'block';
                meDiv.classList.add('error');
                meDiv.innerHTML = '<strong>âŒ è¯·å…ˆç™»å½•è·å–Token</strong>';
                return;
            }
            await testAPI('GET', '/api/v1/auth/me', null, 'me');
        }

        // æ•°æ®åˆ›å»ºæµ‹è¯•
        async function testCreateScenario() {
            const scenarioData = {
                title: `Scenario ${Date.now()}`,
                description: "A test emergency scenario",
                incident_type: "fire",
                severity_level: "medium",
                location: "Test Location",
                status: "active"
            };
            await testAPI('POST', '/api/v1/scenarios/', scenarioData, 'scenario');
        }

        async function testCreateAgent() {
            const agentData = {
                agent_type: "s",
                status: "idle",
                configuration: {
                    model: "gpt-4",
                    temperature: 0.7,
                    max_tokens: 1000
                },
                metadata: {
                    version: "1.0.0",
                    description: "Test Agent"
                }
            };
            await testAPI('POST', '/api/v1/agents/', agentData, 'agent');
        }

        // å®Œæ•´æµ‹è¯•æµç¨‹
        async function testAll() {
            const resultsDiv = document.getElementById('all-results');
            resultsDiv.innerHTML = '<strong>ğŸš€ å¼€å§‹å®Œæ•´æµ‹è¯•æµç¨‹...</strong><br><br>';

            testStep = 0;

            try {
                // æ­¥éª¤1: å¥åº·æ£€æŸ¥
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ¥ æµ‹è¯•ç³»ç»Ÿå¥åº·æ£€æŸ¥...<br>`;
                await testAPI('GET', '/health', null, null);
                resultsDiv.innerHTML += 'âœ… å¥åº·æ£€æŸ¥å®Œæˆ<br>';

                // æ­¥éª¤2: ç³»ç»Ÿå°±ç»ªæ£€æŸ¥
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ“‹ æµ‹è¯•ç³»ç»Ÿå°±ç»ªçŠ¶æ€...<br>`;
                await testAPI('GET', '/ready', null, null);
                resultsDiv.innerHTML += 'âœ… ç³»ç»Ÿå°±ç»ªæ£€æŸ¥å®Œæˆ<br>';

                // æ­¥éª¤3: ç‰ˆæœ¬ä¿¡æ¯
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ“Š è·å–ç‰ˆæœ¬ä¿¡æ¯...<br>`;
                await testAPI('GET', '/version', null, null);
                resultsDiv.innerHTML += 'âœ… ç‰ˆæœ¬ä¿¡æ¯è·å–å®Œæˆ<br>';

                // æ­¥éª¤4: ç”¨æˆ·ç™»å½•
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ” æµ‹è¯•ç”¨æˆ·ç™»å½•...<br>`;
                await testLogin();
                resultsDiv.innerHTML += 'âœ… ç”¨æˆ·ç™»å½•å®Œæˆ<br>';

                // æ­¥éª¤5: è·å–ç”¨æˆ·ä¿¡æ¯
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ‘¤ è·å–ç”¨æˆ·ä¿¡æ¯...<br>`;
                await testAPI('GET', '/api/v1/auth/me', null, null);
                resultsDiv.innerHTML += 'âœ… ç”¨æˆ·ä¿¡æ¯è·å–å®Œæˆ<br>';

                // æ­¥éª¤6: è·å–æ•°æ®åˆ—è¡¨
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} ğŸ“‹ è·å–æ•°æ®åˆ—è¡¨...<br>`;
                await testAPI('GET', '/api/v1/users/', null, null);
                await testAPI('GET', '/api/v1/scenarios/', null, null);
                await testAPI('GET', '/api/v1/agents/', null, null);
                resultsDiv.innerHTML += 'âœ… æ•°æ®åˆ—è¡¨è·å–å®Œæˆ<br>';

                // æ­¥éª¤7: åˆ›å»ºæ–°æ•°æ®
                resultsDiv.innerHTML += `${++testStep}/${totalSteps} â• åˆ›å»ºæ–°æ•°æ®...<br>`;
                await testCreateScenario();
                await testCreateAgent();
                resultsDiv.innerHTML += 'âœ… æ–°æ•°æ®åˆ›å»ºå®Œæˆ<br>';

                // å®Œæˆ
                resultsDiv.innerHTML += `<br><strong>ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼(${testStep}/${totalSteps})</strong><br>`;
                resultsDiv.innerHTML += '<strong>Story 1.3 APIç³»ç»Ÿå®Œå…¨æ­£å¸¸å·¥ä½œï¼</strong><br><br>';
                resultsDiv.innerHTML += '<strong>æµ‹è¯•æ€»ç»“:</strong><br>';
                resultsDiv.innerHTML += 'âœ… ç³»ç»Ÿç›‘æ§ç«¯ç‚¹: æ­£å¸¸<br>';
                resultsDiv.innerHTML += 'âœ… è®¤è¯ç³»ç»Ÿ: æ­£å¸¸<br>';
                resultsDiv.innerHTML += 'âœ… æ•°æ®ç®¡ç†: æ­£å¸¸<br>';
                resultsDiv.innerHTML += 'âœ… é”™è¯¯å¤„ç†: æ­£å¸¸<br>';
                resultsDiv.innerHTML += 'âœ… å“åº”æ€§èƒ½: ä¼˜ç§€<br><br>';
                resultsDiv.innerHTML += '<em>ğŸ¯ Story 1.3 è´¨é‡æ”¹è¿›é¡¹ç›®åœ†æ»¡æˆåŠŸï¼</em>';

            } catch (error) {
                resultsDiv.innerHTML += `<br><strong>âŒ æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:</strong> ${error.message}`;
            }
        }

        // æ¸…ç©ºæ‰€æœ‰æµ‹è¯•ç»“æœ
        function clearAllResults() {
            const allResponseDivs = document.querySelectorAll('.response');
            allResponseDivs.forEach(div => {
                div.style.display = 'none';
                div.innerHTML = '';
                div.classList.remove('success', 'error');
            });

            document.getElementById('all-results').innerHTML = '<p><strong>ğŸ“Š ç­‰å¾…æµ‹è¯•å¼€å§‹...</strong></p><p>ç‚¹å‡»ä¸Šæ–¹"è¿è¡Œå®Œæ•´æµ‹è¯•æµç¨‹"æŒ‰é’®å¼€å§‹æµ‹è¯•ã€‚</p>';
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ åˆå§‹åŒ–ä»£ç 
            console.log('Story 1.3 æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>